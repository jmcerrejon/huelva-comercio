<Alloy>
    <View class="w-full h-full vertical">

        <!-- Navigation Bar buttons -->

        <Require id="reqNavbar" if="Alloy.Globals.guest" src="/partials/navbar" title="Inicio" leftIcon="text-2xl text-white lni lni-user" rightIcon="text-2xl text-white lni lni-search-alt" onLogin="doLogin" onClick="doSearch" onSearchIconClick="doSearch"></Require>
        <Require id="reqNavbar" if="!Alloy.Globals.guest" src="/partials/navbar" title="Inicio" leftIcon="text-2xl text-white lni lni-cog" rightIcon="text-2xl text-white lni lni-search-alt" filterVisibility="text-3xl text-white fas fa-award" onLogin="doLogin" onClick="doSearch" onFilter="doFilter" onSearchIconClick="doSearch"></Require>

        <!-- Body -->

        <ListView id="listView" class="w-11/12 vertical bg-white -mt-5" separatorStyle="Ti.UI.TABLE_VIEW_SEPARATOR_STYLE_NONE" height="90%" onItemclick="doOpenPost" defaultItemTemplate="defaultTemplate">
            <RefreshControl id="refreshListView" onRefreshstart="reset"/>

            <Widget id="is" src="nl.fokkezb.infiniteScroll" onEnd="myLoader"/>

            <Templates>
                <ItemTemplate name="bannerHeader">
                </ItemTemplate>

                <ItemTemplate name="noNewsFound">
                    <View bindId="vwNoNewsFound" class="vertical w-0 h-0">
                        <Label class="font14 text-center" left="10" right="10" text="No se han encontrado ofertas relacionadas.Vuelva a visitarnos mas tarde." />

                        <Button onClick="reset" title="RECARGAR" top="20"></Button>
                    </View>
                </ItemTemplate>

                <ItemTemplate name="defaultTemplate">
                    <View bindId="viewPost" class="w-full h-auto mb-3 bg-white">
                        <View bindId="vwContainer" class="w-11/12 bg-white rounded-xl vertical clip-enabled">
                            <View class="w-full h-52 shadow-md" bindId="image" id="image">
                            </View>

                            <View class="w-full h-auto mt-3 mb-3 text-gray-600 vertical">
                                <View class="w-11/12 horizontal">
                                    <Label bindId="postTitle" id="postTitle" class="w-full text-2xl font-thin text-gray-600">Contenido Exclusivo</Label>

                                    <Label bindId="postDateFormatted" class="w-full text-right mr-0 mb-2 text-sm font-semibold text-gray-500"></Label>
                                </View>

                                <View class="w-full h-auto vertical">
                                    <Label bindId="postBody" id="postBody" class="w-11/12 font-normal text-gray-500 text-justify">¡Regístrate para obtener información sobre ofertas y descuentos especiales!</Label>
                                </View>

                            </View>
                        </View>
                        <Label bindId="lbExclusive" class="h-auto text-3xl text-rose-500 fas fa-award mt-2 mr-7"></Label>
                    </View>
                </ItemTemplate>
            </Templates>

            <ListSection id="sectionBanner">
                <HeaderView>
                    <View id="vwBody" class="w-11/12 h-auto vertical">
                        <ScrollableView class="w-full h-auto mb-4 bg-white" id="scrollableView" dataCollection="banners" onSingletap="doOpenLink" onTouchstart="touchStart">
                            <ImageView image="{img_path}" url="{url}" ns="AvImageview"></ImageView>
                        </ScrollableView>

                        <View id="vwRegisterWarning" if="Alloy.Globals.guest" class="w-11/12 h-auto vertical test rounded-lg mb-2" onClick="doLogin">
                            <Label class="w-screen h-auto text-center text-red-500 mt-2 mb-2">¡Regístrate para obtener información sobre ofertas y descuentos especiales!</Label>
                        </View>
                    </View>
                </HeaderView>
                <ListItem template="bannerHeader"></ListItem>
            </ListSection>
            <ListSection id="sectionNoNewsFound">
                <ListItem template="noNewsFound"></ListItem>
            </ListSection>
            <ListSection dataCollection="news" dataTransform="transformCollection">
                <ListItem itemId="{id}" image:backgroundImage="{image}" vwContainer:borderColor="{exclusive}" lbExclusive:width="{exclusiveIcon}" viewPost:url="{link}" postTitle:text="{title}" postDateFormatted:text="{date_formatted}" postBody:text="{content}" />

                <FooterView>
                    <View id="lvwFooter" class="w-full h-10">
                    </View>
                </FooterView>
            </ListSection>
        </ListView>
    </View>
</Alloy>